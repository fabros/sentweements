<html>

<head>
    <meta charset="utf-8">
    <!-- Set viewport_width = device_width and reset scaling (responsive design) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentweements</title>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro|Pacifico|Ubuntu+Mono|Bitter" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script
      src="http://code.jquery.com/jquery-3.1.1.js"
      integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
      crossorigin="anonymous"></script>    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <link rel="stylesheet" href="static/query_results.css">
</head>

<body>
    <div class="container-fluid">
        <div id="splaaash">
            <h1 id="webapp-title">Sentweements</h1>

            <div class="card centered" id="image-card">
              <img class="card-img-top" id='img' src="http://pbs.twimg.com/media/C4p1KJaWYAE5hdZ.jpg" alt="Current image being processed.">
            </div>

            <div class="card text-center">
              <div class="card-block">
                <h4 class="card-title">Running average emotions</h4>
                <p class="card-text">
                  Anger: <span id=anger>0.00000</span><br/>
                  Contempt: <span id=contempt>0.00000</span><br/>
                  Disgust: <span id=disgust>0.00000</span><br/>
                  Fear: <span id=fear>0.00000</span><br/>
                  Happiness: <span id=happiness>0.00000</span><br/>
                  Neutral: <span id=neutral>0.00000</span><br/>
                  Sadness: <span id=sadness>0.00000</span><br/>
                  Surprise: <span id=surprise>0.00000</span><br/>
                </p>
              </div>
            </div>
        </div>
    </div>
    <script>
        var socket = io();

        socket.emit('init', '{{ init_params|safe }}');

        socket.on('update', function(msg) {
            var update = JSON.parse(msg);
            var url = update.url;
            var mean = update.mean;

            $('#img').fadeOut(400, function() {
                    $("#img").attr('src', update['url']);
                })
                .fadeIn(400);

            $('#anger').text(mean.anger);
            $('#neutral').text(mean.neutral);
            $('#disgust').text(mean.disgust);
            $('#happiness').text(mean.happiness);
            $('#sadness').text(mean.sadness);
            $('#surprise').text(mean.surprise);
            $('#fear').text(mean.fear);
            $('#contempt').text(mean.contempt);
        })

        /*
        $("#img").click(function(e) {

            console.log("a")

            e.preventDefault();
            $imgURL = $(this).attr("href");
            $(".boat_listing .mainGallery")
                .fadeOut(400, function() {
                    $(".boat_listing .mainGallery").attr('src',$imgURL);
                })
                .fadeIn(400);
        });
        */
    </script>
</body>

</html>
